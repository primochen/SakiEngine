# 睁眼转场效果 (Blink Transition)

## 简介

睁眼转场效果模拟了人睁开眼睛的视觉效果：从完全黑屏（闭眼状态）开始，上下两条黑色遮罩向上下移开，逐渐显示出新场景。

**注意**：此转场**只有睁眼过程，没有闭眼过程**，从黑屏直接睁眼显示新场景，不会遮挡游戏UI。

## 使用方法

在 `.sks` 脚本中，使用 `with blink`、`with eyeopen` 或 `with eye` 来应用睁眼转场效果：

```sks
// 基本用法
scene sky with blink

// 可用的别名
scene home with eyeopen
scene school with eye
```

## 效果说明

**睁眼转场流程：**

1. **初始状态（0%）**：屏幕完全被黑色遮罩覆盖（闭眼状态）
2. **场景切换**：立即切换到新场景（在黑屏遮罩下）
3. **睁眼过程（0%-100%）**：上下黑色遮罩向边缘移开，逐渐露出新场景

**时间点：**
- 场景切换发生在动画开始时（黑屏状态）
- 整个动画时长用于睁眼过程

**重要特性：**
- ✅ 不会遮挡UI元素（对话框、菜单等）
- ✅ 只在场景层进行，UI层保持可见
- ✅ 适合从黑屏转入新场景的情境

## 示例脚本

```sks
label morning_wake_up
// 从黑屏开始（已经是闭眼状态）
scene bl

// 睁眼显示卧室场景
"我缓缓睁开双眼..."
scene bedroom with blink

"阳光洒进房间，新的一天开始了。"

return
```

### 场景: 失去意识后苏醒

```sks
scene bl with fade          // 渐黑(失去意识)
"不知过了多久..."
"我恢复了意识。"
scene hospital with eyeopen // 睁眼发现在医院
```

**效果**: 先淡入黑屏，然后通过睁眼转场显示医院场景

## 适用场景

睁眼转场效果特别适合以下情境：

- 💤 角色从睡眠中醒来
- 👁️ 角色睁开眼睛或恢复意识
- 🔄 从回忆/梦境回到现实
- 🎬 需要强调"视角切换"的场景
- ⚡ 失去意识后苏醒的情节

## 与其他转场效果对比

| 转场类型 | 关键词 | 视觉效果 | 适用场景 |
|---------|--------|---------|---------|
| 淡入淡出 | `fade` | 黑屏渐变 | 通用场景切换 |
| 溶解 | `diss` | 图片直接渐变 | 平滑的场景过渡 |
| 擦除 | `wipe` | 旋转扇形擦除 | 时空转换、特效 |
| **睁眼** | `blink` / `eyeopen` / `eye` | **上下遮罩移开** | **醒来、恢复意识** |

## 技术细节

- **持续时间**：默认 800ms（可通过引擎配置调整）
- **曲线**：使用 `Curves.easeInOut` 实现平滑过渡
- **实现**：通过 `CustomPainter` 绘制上下两个矩形遮罩
- **性能**：轻量级实现，无额外资源加载

## 调试信息

在控制台中可以看到转场日志：
```
[BlinkTransition] 到达转场中点，执行回调
```

这表示场景切换已在转场动画的中点执行。

---

**添加时间**: 2025-10
**引擎版本**: SakiEngine 1.0.21+
